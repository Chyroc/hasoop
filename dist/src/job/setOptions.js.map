{"version":3,"sources":["../../../src/job/setOptions.js"],"names":["setGetJobOptions","setCreateOrUpdateJobOptions","setDeleteJobOptions","setUpdateJobOptions","jobUri","tag","jobOrConnectorName","jobName","fromLinkConf","toLinkConf","fromConfigValues","Error","toConfigValues","body","Date","now"],"mappings":";;;;;QASgBA,gB,GAAAA,gB;QAYAC,2B,GAAAA,2B;QAiGAC,mB,GAAAA,mB;QAIAC,mB,GAAAA,mB;;AAtHhB;;AACA;;AALA;;;;AAOA,IAAMC,SAAS,QAAf;;AAEO,SAASJ,gBAAT,CAA0BK,GAA1B,EAA0D;AAAA,QAA3BC,kBAA2B,uEAAN,IAAM;;;AAE7D,QAAID,OAAO,KAAX,EAAkB;AACd,eAAO,sCAAcA,GAAd,EAAmBD,MAAnB,CAAP;AACH,KAFD,MAEO,IAAIC,OAAO,SAAX,EAAsB;AACzB,eAAO,sCAAcA,GAAd,EAAmBD,MAAnB,EAA2BE,kBAA3B,CAAP;AACH,KAFM,MAEA,IAAID,OAAO,OAAX,EAAoB;AACvB,eAAO,sCAAc,OAAd,EAAuBD,MAAvB,EAA+BE,kBAA/B,CAAP;AACH;AAEJ;;AAEM,SAASL,2BAAT,CAAqCM,OAArC,EAA8CC,YAA9C,EAA4DC,UAA5D,EAAwE;AAC3E;AACA;AACA,QAAIC,yBAAJ;AACA,QAAIF,aAAa,MAAb,KAAwB,OAA5B,EAAqC;AACjCE,2BAAmB,iCAAeF,YAAf,CAAnB;AACAA,qBAAa,eAAb,IAAgC,wBAAhC;AACH,KAHD,MAGO,IAAIA,aAAa,MAAb,KAAwB,MAA5B,EAAoC;AACvCE,2BAAmB,gCAAcF,YAAd,CAAnB;AACAA,qBAAa,eAAb,IAAgC,gBAAhC;AACH,KAHM,MAGA;AACH,cAAMG,OAAN;AACH;;AAGD;AACA,QAAIC,uBAAJ;AACA,QAAIH,WAAW,MAAX,KAAsB,OAA1B,EAAmC;AAC/BG,yBAAiB,iCAAeH,UAAf,CAAjB;AACAA,mBAAW,eAAX,IAA8B,wBAA9B;AACH,KAHD,MAGO,IAAIA,WAAW,MAAX,KAAsB,MAA1B,EAAkC;AACrCG,yBAAiB,gCAAcH,UAAd,CAAjB;AACAA,mBAAW,eAAX,IAA8B,gBAA9B;AACH,KAHM,MAGA;AACH,cAAME,OAAN;AACH;;AAED,QAAME,OACF;AACI,gBAAQ,CACJ;AACI,6BAAiB,IADrB;AAEI,oBAAQN,OAFZ;AAGI,6BAAiBO,KAAKC,GAAL,EAHrB;AAII,kBAAM,CAAC,CAJX;AAKI,2BAAeD,KAAKC,GAAL,EALnB;AAMI,2BAAe,IANnB;AAOI,gCAAoBH,cAPxB;AAQI,kCAAsBF,gBAR1B;AASI,iCAAqBD,WAAW,eAAX,CATzB;AAUI,8BAAkBD,aAAa,UAAb,CAVtB;AAWI,uBAAW,IAXf;AAYI,mCAAuBA,aAAa,eAAb,CAZ3B;AAaI,4BAAgBC,WAAW,UAAX,CAbpB;AAcI,oCAAwB;AACpB,2BAAW,CACP;AACI,kCAAc,EADlB;AAEI,8BAAU,CACN;AACI,oCAAY,KADhB;AAEI,sCAAc,EAFlB;AAGI,gCAAQ,gCAHZ;AAII,8BAAM,EAJV;AAKI,qCAAa,KALjB;AAMI,qCAAa,EANjB;AAOI,gCAAQ,SAPZ;AAQI,iCAAS;AARb,qBADM,EAUH;AACC,oCAAY,KADb;AAEC,sCAAc,EAFf;AAGC,gCAAQ,6BAHT;AAIC,8BAAM,EAJP;AAKC,qCAAa,KALd;AAMC,qCAAa,EANd;AAOC,gCAAQ,SAPT;AAQC,iCAAS;AARV,qBAVG,CAFd;AAuBI,4BAAQ,kBAvBZ;AAwBI,0BAAM,EAxBV;AAyBI,4BAAQ;AAzBZ,iBADO,EA2BJ;AACC,kCAAc,EADf;AAEC,8BAAU,CAAC;AACP,oCAAY,KADL;AAEP,sCAAc,EAFP;AAGP,gCAAQ,qBAHD;AAIP,8BAAM,EAJC;AAKP,qCAAa,KALN;AAMP,qCAAa,EANN;AAOP,gCAAQ;AAPD,qBAAD,CAFX;AAYC,4BAAQ,WAZT;AAaC,0BAAM,EAbP;AAcC,4BAAQ;AAdT,iBA3BI,CADS;AA6CpB,8BAAc;AA7CM;AAd5B,SADI;AADZ,KADJ;AAmEA,WAAO,uCAAe,QAAf,EAAyBI,IAAzB,CAAP;AACH;;AAEM,SAASX,mBAAT,CAA6BK,OAA7B,EAAsC;AACzC,WAAO,yCAAiBA,OAAjB,EAA0BH,MAA1B,CAAP;AACH;;AAEM,SAASD,mBAAT,CAA6BE,GAA7B,EAAkCE,OAAlC,EAA2C;AAC9C,QAAIF,OAAO,QAAP,IAAmBA,OAAO,SAA9B,EAAyC;AACrC,eAAO,sCAAc,QAAd,EAAwBD,MAAxB,EAAgCG,OAAhC,CAAP;AACH;AACJ","file":"setOptions.js","sourcesContent":["/**\n * Created by Chyroc on 17/1/4.\n */\n\nimport {setGetOptions, setPostOptions, setPutOptions, setDeleteOptions} from '../utils/setRequestOptions'\nimport {setMysqlConfig, setHdfsConfig} from './setTemplate'\n\nconst jobUri = 'v1/job'\n\nexport function setGetJobOptions(tag, jobOrConnectorName = null) {\n\n    if (tag == 'all') {\n        return setGetOptions(tag, jobUri)\n    } else if (tag == 'jobName') {\n        return setGetOptions(tag, jobUri, jobOrConnectorName)\n    } else if (tag == 'cname') {\n        return setGetOptions('cname', jobUri, jobOrConnectorName)\n    }\n\n}\n\nexport function setCreateOrUpdateJobOptions(jobName, fromLinkConf, toLinkConf) {\n    //TODO\n    //from\n    let fromConfigValues\n    if (fromLinkConf['type'] == 'mysql') {\n        fromConfigValues = setMysqlConfig(fromLinkConf)\n        fromLinkConf['connectorName'] = 'generic-jdbc-connector'\n    } else if (fromLinkConf['type'] == 'hdfs') {\n        fromConfigValues = setHdfsConfig(fromLinkConf)\n        fromLinkConf['connectorName'] = 'hdfs-connector'\n    } else {\n        throw Error()\n    }\n\n\n    //to\n    let toConfigValues\n    if (toLinkConf['type'] == 'mysql') {\n        toConfigValues = setMysqlConfig(toLinkConf)\n        toLinkConf['connectorName'] = 'generic-jdbc-connector'\n    } else if (toLinkConf['type'] == 'hdfs') {\n        toConfigValues = setHdfsConfig(toLinkConf)\n        toLinkConf['connectorName'] = 'hdfs-connector'\n    } else {\n        throw Error()\n    }\n\n    const body =\n        {\n            \"jobs\": [\n                {\n                    \"creation-user\": null,\n                    \"name\": jobName,\n                    \"creation-date\": Date.now(),\n                    \"id\": -1,\n                    \"update-date\": Date.now(),\n                    \"update-user\": null,\n                    \"to-config-values\": toConfigValues,\n                    \"from-config-values\": fromConfigValues,\n                    \"to-connector-name\": toLinkConf['connectorName'],\n                    \"from-link-name\": fromLinkConf['linkName'],\n                    \"enabled\": true,\n                    \"from-connector-name\": fromLinkConf['connectorName'],\n                    \"to-link-name\": toLinkConf['linkName'],\n                    \"driver-config-values\": {\n                        \"configs\": [\n                            {\n                                \"validators\": [],\n                                \"inputs\": [\n                                    {\n                                        \"editable\": \"ANY\",\n                                        \"validators\": [],\n                                        \"name\": \"throttlingConfig.numExtractors\",\n                                        \"id\": 88,\n                                        \"sensitive\": false,\n                                        \"overrides\": \"\",\n                                        \"type\": \"INTEGER\",\n                                        \"value\": \"1\"\n                                    }, {\n                                        \"editable\": \"ANY\",\n                                        \"validators\": [],\n                                        \"name\": \"throttlingConfig.numLoaders\",\n                                        \"id\": 89,\n                                        \"sensitive\": false,\n                                        \"overrides\": \"\",\n                                        \"type\": \"INTEGER\",\n                                        \"value\": \"1\"\n                                    }\n                                ],\n                                \"name\": \"throttlingConfig\",\n                                \"id\": 22,\n                                \"type\": \"JOB\"\n                            }, {\n                                \"validators\": [],\n                                \"inputs\": [{\n                                    \"editable\": \"ANY\",\n                                    \"validators\": [],\n                                    \"name\": \"jarConfig.extraJars\",\n                                    \"id\": 90,\n                                    \"sensitive\": false,\n                                    \"overrides\": \"\",\n                                    \"type\": \"LIST\"\n                                }\n                                ],\n                                \"name\": \"jarConfig\",\n                                \"id\": 23,\n                                \"type\": \"JOB\"\n                            }\n                        ],\n                        \"validators\": []\n                    }\n                }\n            ]\n        }\n    return setPostOptions('v1/job', body)\n}\n\nexport function setDeleteJobOptions(jobName) {\n    return setDeleteOptions(jobName, jobUri)\n}\n\nexport function setUpdateJobOptions(tag, jobName) {\n    if (tag == 'enable' || tag == 'disable') {\n        return setPutOptions('enable', jobUri, jobName)\n    }\n}"]}