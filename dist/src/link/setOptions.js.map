{"version":3,"sources":["../../../src/link/setOptions.js"],"names":["setCreateLinkOptions","setDeleteLinkOptions","setGetLinkOptions","setUpdateOptions","linkUri","linkName","param","body","uri","encodeURIComponent","Date","now","Error","tag","linkOrConnectorName"],"mappings":"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","file":"setOptions.js","sourcesContent":["/**\n * Created by Chyroc on 17/1/3.\n */\n\nimport {setGetOptions, setPostOptions, setPutOptions, setDeleteOptions} from '../utils/setRequestOptions'\n\nconst linkUri = 'v1/link'\n\nexport function setCreateLinkOptions(linkName, param) {\n    const body = {}\n    if (param['DatabaseType'] == 'mysql') {\n        const uri = encodeURIComponent('jdbc:mysql://' + param['connectionHost'] + ':' + param['connectionPort'])\n        body['links'] = [\n            {\n                \"id\": -1,\n                \"name\": linkName,\n                \"connector-name\": \"generic-jdbc-connector\",\n                \"enabled\": true,\n                \"creation-date\": Date.now(),\n                \"creation-user\": null,\n                \"update-user\": null,\n                \"update-date\": Date.now(),\n\n                \"link-config-values\": {\n                    \"configs\": [\n                        {\n                            \"validators\": [],\n                            \"inputs\": [{\n                                \"size\": 128,\n                                \"editable\": \"ANY\",\n                                \"validators\": [],\n                                \"name\": \"linkConfig.jdbcDriver\",\n                                \"id\": 67,\n                                \"sensitive\": false,\n                                \"overrides\": \"\",\n                                \"type\": \"STRING\",\n                                \"value\": \"com.mysql.jdbc.Driver\"\n                            }, {\n                                \"size\": 2000,\n                                \"editable\": \"ANY\",\n                                \"validators\": [],\n                                \"name\": \"linkConfig.connectionString\",\n                                \"id\": 68,\n                                \"sensitive\": false,\n                                \"overrides\": \"\",\n                                \"type\": \"STRING\",\n                                \"value\": uri\n                            }, {\n                                \"size\": 40,\n                                \"editable\": \"ANY\",\n                                \"validators\": [],\n                                \"name\": \"linkConfig.username\",\n                                \"id\": 69,\n                                \"sensitive\": false,\n                                \"overrides\": \"\",\n                                \"type\": \"STRING\",\n                                \"value\": param['username']\n                            }, {\n                                \"size\": 40,\n                                \"editable\": \"ANY\",\n                                \"validators\": [],\n                                \"name\": \"linkConfig.password\",\n                                \"id\": 70,\n                                \"sensitive\": true,\n                                \"overrides\": \"\",\n                                \"type\": \"STRING\",\n                                \"value\": param['password']\n                            }, {\n                                \"editable\": \"ANY\",\n                                \"validators\": [],\n                                \"name\": \"linkConfig.fetchSize\",\n                                \"id\": 71,\n                                \"sensitive\": false,\n                                \"overrides\": \"\",\n                                \"type\": \"INTEGER\"\n                            }, {\n                                \"editable\": \"ANY\",\n                                \"validators\": [],\n                                \"name\": \"linkConfig.jdbcProperties\",\n                                \"id\": 72,\n                                \"sensitive\": false,\n                                \"overrides\": \"\",\n                                \"type\": \"MAP\",\n                                \"sensitive-pattern\": \"\"\n                            }\n                            ],\n                            \"name\": \"linkConfig\",\n                            \"id\": 17,\n                            \"type\": \"LINK\"\n                        }, {\n                            \"validators\": [],\n                            \"inputs\": [\n                                {\n                                    \"size\": 5,\n                                    \"editable\": \"ANY\",\n                                    \"validators\": [],\n                                    \"name\": \"dialect.identifierEnclose\",\n                                    \"id\": 73,\n                                    \"sensitive\": false,\n                                    \"overrides\": \"\",\n                                    \"type\": \"STRING\",\n                                    \"value\": encodeURIComponent(param['identifierEnclose'])\n                                }\n                            ],\n                            \"name\": \"dialect\",\n                            \"id\": 18,\n                            \"type\": \"LINK\"\n                        }\n                    ],\n                    \"validators\": []\n                }\n\n            }\n        ]\n    } else if (param['type'] == 'hdfs') {\n        //TODO\n        // param['uri'] = 's3a://sqoop2/'\n        // param['s3'] = {}\n        // param['s3']['access'] = 'AKIAOISG3IRVOIUP2PNA'\n        // param['s3']['secret'] = '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'\n        // param['s3']['region'] = 's3.cn-north-1.amazonaws.com.cn'\n        body['links'] = [\n            {\n                \"id\": -1,\n                \"name\": linkName,\n                \"creation-user\": null,\n                \"creation-date\": Date.now(),\n                \"connector-name\": \"hdfs-connector\",\n                \"update-date\": Date.now(),\n                \"enabled\": true,\n                \"update-user\": null,\n                \"link-config-values\": {\n                    \"configs\": [\n                        {\n                            \"validators\": [],\n                            \"inputs\": [{\n                                \"size\": 255,\n                                \"editable\": \"ANY\",\n                                \"validators\": [],\n                                \"name\": \"linkConfig.uri\",\n                                \"id\": 52,\n                                \"sensitive\": false,\n                                \"overrides\": \"\",\n                                \"type\": \"STRING\",\n                                \"value\": encodeURIComponent('s3a://sqoop2/')\n                            }, {\n                                \"size\": 255,\n                                \"editable\": \"ANY\",\n                                \"validators\": [],\n                                \"name\": \"linkConfig.confDir\",\n                                \"id\": 53,\n                                \"sensitive\": false,\n                                \"overrides\": \"\",\n                                \"type\": \"STRING\"\n                            }, {\n                                \"editable\": \"ANY\",\n                                \"validators\": [],\n                                \"name\": \"linkConfig.configOverrides\",\n                                \"id\": 54,\n                                \"sensitive\": false,\n                                \"overrides\": \"\",\n                                \"type\": \"MAP\",\n                                \"value\": {\n                                    \"fs.s3a.access.key\": \"AKIAOISG3IRVOIUP2PNA\",\n                                    \"fs.s3a.impl\": \"org.apache.hadoop.fs.s3a.S3AFileSystem\",\n                                    \"fs.s3a.secret.key\": \"CIEmKSQMSuTql6XYlqVVdyAbf+CIYMKj1NWzmhT+\",\n                                    \"fs.s3a.endpoint\": \"s3.cn-north-1.amazonaws.com.cn\"\n                                },\n                                \"sensitive-pattern\": \"\"\n                            }\n                            ],\n                            \"name\": \"linkConfig\",\n                            \"id\": 13,\n                            \"type\": \"LINK\"\n                        }\n                    ],\n                    \"validators\": []\n                }\n            }\n        ]\n    } else {\n        throw Error('only can deal mysql or hdfs')\n    }\n    return setPostOptions(linkUri, body)\n\n}\n\nexport function setDeleteLinkOptions(linkName) {\n    return setDeleteOptions(linkName, linkUri)\n}\n\nexport function setGetLinkOptions(tag = 'all', linkOrConnectorName = null) {\n    if (tag == 'all') {\n        return setGetOptions(tag, linkUri)\n    } else if (tag == 'subName') {\n        return setGetOptions(tag, linkUri, linkOrConnectorName)\n    } else if (tag == 'cname') {\n        return setGetOptions('cname', linkUri, linkOrConnectorName)\n    }\n}\n\nexport function setUpdateOptions(tag, linkName) {\n    if (tag == 'enable' || tag == 'disable') {\n        return setPutOptions('enable', linkUri, linkName)\n    }\n}"]}